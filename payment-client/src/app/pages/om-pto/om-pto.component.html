<div class="content-menu-top">
  <app-head-content></app-head-content>
  <div class="topic">
    <h4>PTO - การอนุมัติจ่ายเงินโดยกรมบัญชีกลาง/คลังจังหวัด</h4>
  </div>
</div>
<div class="body">
  <div class="container-fluid">
    <span class="fill-remaining-space">
      <button (click)="openDialogOmSearchCriteria()" class="btn btn-info" mat-icon-button>
        <mat-icon>description</mat-icon>
        <span>ตัวเลือก</span>
      </button>
    </span>
    <span class="fill-remaining-space">
      <span>{{ role }}</span>
    </span>
    <span class="fill-remaining-space">
      <button (click)="clearInputByRole()" class="btn btn-info" mat-icon-button>
        <mat-icon>refresh</mat-icon>
        <span>เคลียร์ พารามิเตอร์</span>
      </button>
    </span>
    <mat-card>
      <mat-card-content>
        <form [formGroup]="omFormCreate" [ngClass]="{ 'submited-form': isSubmitedForm }">
          <div class="panel panel-primary">
            <div (click)="panelExpanded = !panelExpanded" class="panel-heading pointer">
              <h3 class="panel-head">
                Selection Criteria
                <span class="float-right"
                  ><i *ngIf="!panelExpanded" class="material-icons">add</i></span
                >
                <span class="float-right"
                  ><i *ngIf="panelExpanded" class="material-icons">remove</i></span
                >
              </h3>
            </div>
            <div *ngIf="panelExpanded" class="panel-body">
              <div class="row">
                <div class="col-md-2">
                  <label class="text-underline-red input-head"> รหัสหน่วยงาน </label>
                </div>
                <div class="col-md-4">
                  <span *ngIf="optionExcludeCompanyCode === 'Y'" class="badge badge-include"
                    >Not include</span
                  >
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="departmentCodeFrom"
                      maxLength="5"
                      type="text"
                      (blur)="setCompanyCode('departmentCodeFrom')"
                    />
                    <!--                    <span (click)="openDialogOmCompanyCode()" class="clear-input-icon">-->
                    <!--                      <img src="assets/images/icon/menu.svg" width="12px" />-->
                    <!--                    </span>-->
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('departmentCodeFrom')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{departmentCodeFromBindingName}}-->
                </div>
                <!--                <label class="input-head pt-15">ถึง </label>-->
                <!--                <div class="col-12 col-md-4">-->
                <!--                  <div class="input-group">-->
                <!--                    <input-->
                <!--                      class="form-control"-->
                <!--                      formControlName="departmentCodeTo"-->
                <!--                      maxLength="5"-->
                <!--                      type="text"-->
                <!--                      (blur)="setCompanyCode('departmentCodeTo')"-->
                <!--                    />-->
                <!--                    <div class="input-group-append button-group-search">-->
                <!--                      <button-->
                <!--                        (click)="openDialogSearchMaster('departmentCodeTo')"-->
                <!--                        class="btn btn-default"-->
                <!--                        type="button"-->
                <!--                      >-->
                <!--                        <img src="assets/images/icon/fa-search.svg" width="12px" />-->
                <!--                      </button>-->
                <!--                    </div>-->
                <!--                  </div>-->
                <!--                  &lt;!&ndash;                  {{departmentCodeToBindingName}}&ndash;&gt;-->
                <!--                </div>-->
              </div>
              <div class="row">
                <div class="col-md-2">
                  <label class="text-underline-red input-head"> รหัสจังหวัด </label>
                </div>
                <div class="col-md-4">
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="provinceCodeFrom"
                      maxLength="4"
                      type="text"
                    />
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('provinceCodeFrom')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{provinceCodeFromBindingName}}-->
                </div>
                <!--                <label class="input-head pt-15">ถึง </label>-->
                <!--                <div class="col-12 col-md-4">-->
                <!--                  <div class="input-group">-->
                <!--                    <input-->
                <!--                      class="form-control"-->
                <!--                      formControlName="provinceCodeTo"-->
                <!--                      maxLength="4"-->
                <!--                      type="text"-->
                <!--                    />-->
                <!--                    <div class="input-group-append button-group-search">-->
                <!--                      <button-->
                <!--                        (click)="openDialogSearchMaster('provinceCodeTo')"-->
                <!--                        class="btn btn-default"-->
                <!--                        type="button"-->
                <!--                      >-->
                <!--                        <img src="assets/images/icon/fa-search.svg" width="12px" />-->
                <!--                      </button>-->
                <!--                    </div>-->
                <!--                  </div>-->
                <!--                  &lt;!&ndash;                  {{provinceCodeToBindingName}}&ndash;&gt;-->
                <!--                </div>-->
              </div>
              <div class="row">
                <div class="col-md-2">
                  <label class="text-underline-red input-head"> ปีบัญชี </label>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control"
                    formControlName="yearAccount"
                    maxLength="4"
                    type="text"
                  />
                </div>
              </div>
              <div class="row">
                <div class="col-md-2">
                  <label class="text-black input-head"> วันผ่านรายการ </label>
                </div>
                <div class="col-md-4">
                  <span *ngIf="isHaveOptionExclude('postDate')" class="badge badge-include"
                    >Not include</span
                  >
                  <div class="input-group datetime-input">
                    <input
                      [matDatepicker]="postDateFromPicker"
                      class="form-control"
                      formControlName="postDateFrom"
                      type="text"
                      appDateInput
                    />
                    <span class="clear-input-icon" (click)="openDialogDateParameter('postDate')">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="datetime-input-append">
                      <button
                        (click)="postDateFromPicker.open()"
                        class="btn-calendar-icon"
                        type="button"
                      >
                        <img src="assets/images/icon/calendar.svg" width="12px" />
                        <mat-datepicker #postDateFromPicker></mat-datepicker>
                      </button>
                    </div>
                  </div>
                </div>
                <label class="input-head pt-15">ถึง </label>
                <div class="col-12 col-md-4">
                  <div class="input-group datetime-input">
                    <input
                      [matDatepicker]="postDateto"
                      class="form-control"
                      formControlName="postDateTo"
                      type="text"
                      appDateInput
                      [min]="omFormCreate.controls.postDateFrom.value"
                    />
                    <span class="clear-input-icon" (click)="openDialogDateParameter('postDate')">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="datetime-input-append">
                      <button (click)="postDateto.open()" class="btn-calendar-icon" type="button">
                        <img src="assets/images/icon/calendar.svg" width="12px" />
                        <mat-datepicker #postDateto></mat-datepicker>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-2">
                  <label class="text-black input-head"> ผู้ขาย </label>
                </div>
                <div class="col-md-4">
                  <span *ngIf="optionExcludeVendor === 'Y'" class="badge badge-include"
                    >Not include</span
                  >
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="vendorTaxIdFrom"
                      maxLength="13"
                      type="text"
                      (blur)="setVendor('vendorFrom')"
                    />
                    <span (click)="openDialogOmVendor()" class="clear-input-icon">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('vendorTaxIdFrom')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{vendorTaxIdFromBindingName}}-->
                </div>
                <label class="input-head pt-15">ถึง </label>
                <div class="col-12 col-md-4">
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="vendorTaxIdTo"
                      maxLength="13"
                      type="text"
                      (blur)="setVendor('vendorTo')"
                    />
                    <span (click)="openDialogOmVendor()" class="clear-input-icon">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('vendorTaxIdTo')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{vendorTaxIdToBindingName}}-->
                </div>
              </div>
              <div class="row">
                <div class="col-md-2">
                  <label class="text-black input-head"> หน่วยเบิกจ่าย </label>
                </div>
                <div class="col-md-4">
                  <span *ngIf="optionExcludeDisbursementCode === 'Y'" class="badge badge-include"
                    >Not include</span
                  >
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="disbursementCodeFrom"
                      maxLength="10"
                      type="text"
                      (blur)="setDisbursementCode('disbursementCodeFrom')"
                    />
                    <span (click)="openDialogOmPaymentCenter()" class="clear-input-icon">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('disbursementCodeFrom')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{disbursementCodeFromBindingName}}-->
                </div>
                <label class="input-head pt-15">ถึง </label>
                <div class="col-12 col-md-4">
                  <div class="input-group">
                    <input
                      class="form-control"
                      formControlName="disbursementCodeTo"
                      maxLength="10"
                      type="text"
                      (blur)="setDisbursementCode('disbursementCodeTo')"
                    />
                    <span (click)="openDialogOmPaymentCenter()" class="clear-input-icon">
                      <img src="assets/images/icon/menu.svg" width="12px" />
                    </span>
                    <div class="input-group-append button-group-search">
                      <button
                        (click)="openDialogSearchMaster('disbursementCodeTo')"
                        class="btn btn-default"
                        type="button"
                      >
                        <img src="assets/images/icon/fa-search.svg" width="12px" />
                      </button>
                    </div>
                  </div>
                  <!--                  {{disbursementCodeToBindingName}}-->
                </div>
              </div>
            </div>
          </div>
          <div [ngClass]="{ show: isOpenCollapseDetail }" class="collapse-detail">
            <div class="panel panel-primary">
              <div (click)="panelExpanded1 = !panelExpanded1" class="panel-heading pointer">
                <h3 class="panel-head">
                  Addition Selection
                  <span class="float-right"
                    ><i *ngIf="!panelExpanded1" class="material-icons">add</i></span
                  >
                  <span class="float-right"
                    ><i *ngIf="panelExpanded1" class="material-icons">remove</i></span
                  >
                </h3>
              </div>
              <div *ngIf="panelExpanded1" class="panel-body">
                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> ประเภทเอกสาร </label>
                  </div>

                  <div class="col-md-4">
                    <span *ngIf="optionExcludeDocType === 'Y'" class="badge badge-include"
                      >Not include</span
                    >
                    <mat-autocomplete #auto5="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsDocTypeFrom | async"
                        [value]="option.name"
                      >
                        {{ option.name }} - {{ option.description }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [formControl]="docTypeFromControl"
                        [matAutocomplete]="auto5"
                        class="form-control"
                        formControlName="docTypeFrom"
                        maxLength="2"
                        type="text"
                        (blur)="setDocType('docTypeFrom')"
                        appUpperCaseDirective
                      />
                      <span (click)="openDialogOmDocType()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="input-group-append button-group-search">
                        <button
                          (click)="openDialogSearchMaster('docTypeFrom')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <mat-autocomplete #auto6="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsDocTypeTo | async"
                        [value]="option.name"
                      >
                        {{ option.name }} - {{ option.description }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [formControl]="docTypeToControl"
                        [matAutocomplete]="auto6"
                        class="form-control"
                        formControlName="docTypeTo"
                        maxLength="2"
                        type="text"
                        (blur)="setDocType('docTypeTo')"
                        appUpperCaseDirective
                      />
                      <span (click)="openDialogOmDocType()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="input-group-append button-group-search">
                        <button
                          (click)="openDialogSearchMaster('docTypeTo')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> วิธีการชำระเงิน </label>
                  </div>
                  <div class="col-md-4">
                    <span *ngIf="optionExcludePaymentMethod === 'Y'" class="badge badge-include"
                      >Not include</span
                    >
                    <mat-autocomplete #auto1="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsPaymentFrom | async"
                        [value]="option.valueCode"
                      >
                        {{ option.valueCode }} - {{ option.name }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [formControl]="payMethodFromControl"
                        [matAutocomplete]="auto1"
                        [readonly]="isDisablePayMethod"
                        class="form-control"
                        formControlName="payMethodFrom"
                        maxLength="1"
                        type="text"
                        (blur)="setPaymentMethod('payMethodFrom')"
                      />
                      <span (click)="openDialogOmPaymentMethod()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div
                        *ngIf="!isDisablePayMethod"
                        class="input-group-append button-group-search"
                      >
                        <button
                          (click)="openDialogSearchMaster('payMethodFrom')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <mat-autocomplete #auto2="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsPaymentTo | async"
                        [value]="option.valueCode"
                      >
                        {{ option.valueCode }} - {{ option.name }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [formControl]="payMethodToControl"
                        [matAutocomplete]="auto2"
                        [readonly]="isDisablePayMethod"
                        class="form-control"
                        formControlName="payMethodTo"
                        maxLength="1"
                        type="text"
                        (blur)="setPaymentMethod('payMethodTo')"
                      />
                      <span (click)="openDialogOmPaymentMethod()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div
                        *ngIf="!isDisablePayMethod"
                        class="input-group-append button-group-search"
                      >
                        <button
                          (click)="openDialogSearchMaster('payMethodTo')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> วันที่เอกสาร</label>
                  </div>
                  <div class="col-md-4">
                    <span *ngIf="isHaveOptionExclude('documentDate')" class="badge badge-include"
                      >Not include</span
                    >
                    <div class="input-group datetime-input">
                      <input
                        [matDatepicker]="documentDateFrom"
                        class="form-control"
                        formControlName="documentDateFrom"
                        type="text"
                        appDateInput
                      />
                      <span
                        class="clear-input-icon"
                        (click)="openDialogDateParameter('documentDate')"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="datetime-input-append">
                        <button
                          (click)="documentDateFrom.open()"
                          class="btn-calendar-icon"
                          type="button"
                        >
                          <img src="assets/images/icon/calendar.svg" width="12px" />
                          <mat-datepicker #documentDateFrom></mat-datepicker>
                        </button>
                      </div>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <div class="input-group datetime-input">
                      <input
                        [matDatepicker]="documentDateTo"
                        class="form-control"
                        formControlName="documentDateTo"
                        type="text"
                        appDateInput
                        [min]="omFormCreate.controls.documentDateFrom.value"
                      />
                      <span
                        class="clear-input-icon"
                        (click)="openDialogDateParameter('documentDate')"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="datetime-input-append">
                        <button
                          (click)="documentDateTo.open()"
                          class="btn-calendar-icon"
                          type="button"
                        >
                          <img src="assets/images/icon/calendar.svg" width="12px" />
                          <mat-datepicker #documentDateTo></mat-datepicker>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> วันที่บันทึก</label>
                  </div>
                  <div class="col-md-4">
                    <span
                      *ngIf="isHaveOptionExclude('documentCreateDate')"
                      class="badge badge-include"
                      >Not include</span
                    >
                    <div class="input-group datetime-input">
                      <input
                        [matDatepicker]="documentCreateDateFrom"
                        class="form-control"
                        formControlName="documentCreateDateFrom"
                        type="text"
                        appDateInput
                      />
                      <span
                        class="clear-input-icon"
                        (click)="openDialogDateParameter('documentCreateDate')"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="datetime-input-append">
                        <button
                          (click)="documentCreateDateFrom.open()"
                          class="btn-calendar-icon"
                          type="button"
                        >
                          <img src="assets/images/icon/calendar.svg" width="12px" />
                          <mat-datepicker #documentCreateDateFrom></mat-datepicker>
                        </button>
                      </div>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <div class="input-group datetime-input">
                      <input
                        [matDatepicker]="documentCreateDateTo"
                        class="form-control"
                        formControlName="documentCreateDateTo"
                        type="text"
                        appDateInput
                        [min]="omFormCreate.controls.documentCreateDateFrom.value"
                      />
                      <span
                        class="clear-input-icon"
                        (click)="openDialogDateParameter('documentCreateDate')"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="datetime-input-append">
                        <button
                          (click)="documentCreateDateTo.open()"
                          class="btn-calendar-icon"
                          type="button"
                        >
                          <img src="assets/images/icon/calendar.svg" width="12px" />
                          <mat-datepicker #documentCreateDateTo></mat-datepicker>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> แยกประเภทพิเศษ </label>
                  </div>
                  <div class="col-md-4">
                    <span *ngIf="optionExcludeSpecialType === 'Y'" class="badge badge-include"
                      >Not include</span
                    >
                    <mat-autocomplete #auto3="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsSpecialFrom | async"
                        [value]="option.valueCode"
                      >
                        {{ option.valueCode }} - {{ option.name }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [matAutocomplete]="auto3"
                        class="form-control"
                        formControlName="specialTypeFrom"
                        maxLength="1"
                        type="text"
                        (blur)="setSpecialGL('specialTypeFrom')"
                      />
                      <span (click)="openDialogOmSpecialType()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="input-group-append button-group-search">
                        <button
                          (click)="openDialogSearchMaster('specialTypeFrom')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <mat-autocomplete #auto4="matAutocomplete">
                      <mat-option
                        *ngFor="let option of filteredOptionsSpecialTo | async"
                        [value]="option.valueCode"
                      >
                        {{ option.valueCode }} - {{ option.name }}
                      </mat-option>
                    </mat-autocomplete>
                    <div class="input-group">
                      <input
                        [matAutocomplete]="auto4"
                        class="form-control"
                        formControlName="specialTypeTo"
                        maxLength="1"
                        type="text"
                        (blur)="setSpecialGL('specialTypeTo')"
                      />
                      <span (click)="openDialogOmSpecialType()" class="clear-input-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                      <div class="input-group-append button-group-search">
                        <button
                          (click)="openDialogSearchMaster('specialTypeTo')"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> เลขที่เอกสาร </label>
                  </div>
                  <div class="col-md-4">
                    <span *ngIf="optionExcludeDocumentNo === 'Y'" class="badge badge-include"
                      >Not include</span
                    >
                    <div class="input-group">
                      <input
                        class="form-control"
                        formControlName="documentNoFrom"
                        maxLength="10"
                        type="text"
                        (blur)="setDocumentNo('documentNoFrom')"
                      />
                      <span (click)="openDialogOmDocumentNo()" class="clear-input-icon one-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <div class="input-group">
                      <input
                        class="form-control"
                        formControlName="documentNoTo"
                        maxLength="10"
                        type="text"
                        (blur)="setDocumentNo('documentNoTo')"
                      />
                      <span (click)="openDialogOmDocumentNo()" class="clear-input-icon one-icon">
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> การอ้างอิง </label>
                  </div>
                  <div class="col-md-4">
                    <span *ngIf="optionExcludeHeaderReference === 'Y'" class="badge badge-include"
                      >Not include</span
                    >
                    <div class="input-group">
                      <input
                        class="form-control"
                        formControlName="headerReferenceFrom"
                        maxLength="16"
                        type="text"
                        (blur)="setHeaderReference('headerReferenceFrom')"
                      />
                      <span
                        (click)="openDialogOmHeaderReference()"
                        class="clear-input-icon one-icon"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                    </div>
                  </div>
                  <label class="input-head pt-15">ถึง </label>
                  <div class="col-12 col-md-4">
                    <div class="input-group">
                      <input
                        class="form-control"
                        formControlName="headerReferenceTo"
                        maxLength="16"
                        type="text"
                        (blur)="setHeaderReference('headerReferenceTo')"
                      />
                      <span
                        (click)="openDialogOmHeaderReference()"
                        class="clear-input-icon one-icon"
                      >
                        <img src="assets/images/icon/menu.svg" width="12px" />
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div [ngClass]="{ show: isOpenCollapseDetail }" class="collapse-detail">
            <div class="panel panel-primary">
              <div (click)="panelExpanded2 = !panelExpanded2" class="panel-heading pointer">
                <h3 class="panel-head">
                  โครงร่างรายงาน
                  <span class="float-right"
                    ><i *ngIf="!panelExpanded2" class="material-icons">add</i></span
                  >
                  <span class="float-right"
                    ><i *ngIf="panelExpanded2" class="material-icons">remove</i></span
                  >
                </h3>
              </div>
              <div *ngIf="panelExpanded2" class="panel-body">
                <div class="row">
                  <div class="col-md-2">
                    <label class="text-black input-head"> โครงร่าง </label>
                  </div>
                  <div class="col-md-4">
                    <div class="input-group">
                      <input
                        class="form-control"
                        formControlName="outline"
                        maxLength="20"
                        type="text"
                        (blur)="getColumnOneByName()"
                      />
                      <div class="input-group-append button-group-search">
                        <button
                          (click)="openDialogOmSearchColumn()"
                          class="btn btn-default"
                          type="button"
                        >
                          <img src="assets/images/icon/fa-search.svg" width="12px" />
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row mx-auto mt-3 border-t-black mb-2">
            <div class="mx-auto d-flex">
              <button (click)="onSearch()" class="btn-light" type="button">ค้นหา</button>
              <button
                (click)="openDialogOmSaveSearchCriteria('save')"
                class="btn-light"
                type="button"
              >
                สร้างเงื่อนไขการค้นหา
              </button>
              <button
                *ngIf="dataCriteria"
                (click)="openDialogOmSaveSearchCriteria('edit')"
                class="btn-light"
                type="button"
              >
                แก้ไขเงื่อนไขการค้นหา
              </button>
            </div>
          </div>
          <!--          <div class="collapse-detail" [ngClass]="{ show: isOpenCollapseDetail }">-->
          <!--            <div class="panel panel-primary">-->
          <!--              <div class="panel-heading pointer" (click)="panelExpanded3 = !panelExpanded3">-->
          <!--                <h3>ฟิลด์ที่ซ่อนไว้-->
          <!--                  <span class="float-right"><i class="material-icons" *ngIf="!panelExpanded3">add</i></span>-->
          <!--                  <span class="float-right"><i class="material-icons" *ngIf="panelExpanded3">remove</i></span>-->
          <!--                </h3>-->
          <!--              </div>-->
          <!--              <div class="panel-body" *ngIf="panelExpanded3">-->
          <!--                <div class="row">-->
          <!--                  <div class="col-12 col-md-12">-->
          <!--                    <form [formGroup]="form">-->
          <!--                      <mat-checkbox *ngFor="let cd of columnDefinitions" [formControlName]="cd.def">{{cd.columnName}}-->
          <!--                      </mat-checkbox>-->
          <!--                    </form>-->
          <!--                  </div>-->
          <!--                </div>-->
          <!--              </div>-->
          <!--            </div>-->
          <!--          </div>-->
        </form>
        <ul class="warning-box">
          <li *ngFor="let c of listSearchValidate">{{ c }}</li>
        </ul>
        <!-- Table -->
        <div id="table-found" [hidden]="isShowSearchData">
          <div class="row justify-content-end">
            <div class="col-sm-6 col-md-4">
              <input
                class="form-control"
                type="text"
                #filterTable
                (keydown.enter)="this.utils.onEnterFilter($event.target.value, this.dataSource)"
                placeholder="Filter"
              />
            </div>
            <div class="col-sm-1 col-md-1 pl-0 d-flex align-items-center justify-content-center">
              <button
                type="button"
                (click)="this.utils.onEnterFilter('', this.dataSource); this.clearFilter()"
                class="btn-gradient btn-bg-info d-flex"
              >
                ล้าง
              </button>
            </div>
          </div>
          <div class="long-data-table" style="max-height: 562px;">
            <table [dataSource]="dataSource" class="table-custom-size" mat-table matSort>
              <!-- รายการ -->
              <ng-container matColumnDef="list">
                <th *matHeaderCellDef class="info" mat-header-cell>รายการ</th>
                <td *matCellDef="let element; let i = index" mat-cell>
                  {{
                    this.paginator.pageIndex == 0
                      ? i + 1
                      : 1 + i + this.paginator.pageIndex * this.paginator.pageSize
                  }}
                </td>
              </ng-container>
              <!-- อนุมัติ -->
              <ng-container matColumnDef="approve">
                <th *matHeaderCellDef class="info" mat-header-cell>อนุมัติ</th>
                <td *matCellDef="let row; let i = index" mat-cell>
                  <mat-checkbox
                    (change)="$event ? selectionApprove.toggle(row) : null"
                    (click)="onClickCheckedDocument($event, 'approve', row, i)"
                    [aria-label]="checkboxLabelApproved(row)"
                    [checked]="selectionApprove.isSelected(row)"
                  >
                  </mat-checkbox>
                </td>
              </ng-container>
              <!-- ไม่อนุมัติ -->
              <ng-container matColumnDef="notApprove">
                <th *matHeaderCellDef class="info" mat-header-cell>ไม่อนุมัติ</th>
                <td *matCellDef="let row; let i = index" mat-cell>
                  <mat-checkbox
                    (change)="$event ? selectionNotApprove.toggle(row) : null"
                    (click)="onClickCheckedDocument($event, 'notApprove', row, i)"
                    [aria-label]="checkboxLabelNotApproved(row)"
                    [checked]="selectionNotApprove.isSelected(row)"
                  >
                  </mat-checkbox>
                </td>
              </ng-container>
              <!-- การยืนยันผู้ขาย -->
              <ng-container matColumnDef="confirmSeller">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  การยืนยันผู้ขาย
                </th>
                <td class="text-center" *matCellDef="let element" mat-cell>
                  <img
                    *ngIf="!element.confirmVendor"
                    class="icon-warning"
                    src="assets/images/icon/warning.png"
                  />
                </td>
              </ng-container>
              <!-- BOT -->
              <ng-container matColumnDef="bot">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>BOT</th>
                <td *matCellDef="let element" mat-cell>
                  <img
                    *ngIf="element.bot"
                    class="icon-status-om"
                    src="assets/images/icon/BOT.png"
                  />
                </td>
              </ng-container>
              <!-- เหตุผล -->
              <ng-container matColumnDef="reason">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>เหตุผล</th>
                <td *matCellDef="let element; let i = index" mat-cell>
                  <app-base-text-area
                    [maxLength]="200"
                    [value]="element.reason"
                    (onChangeValue)="setReasonTextArea(element, i, $event)"
                    [isDisabled]="!selectionNotApprove.isSelected(element)"
                  ></app-base-text-area>
                  <!--                <textarea-->
                  <!--                  [value]="element.reason"-->
                  <!--                  [id]="-->
                  <!--                    element.originalDocumentNo + element.companyCode + element.originalFiscalYear-->
                  <!--                  "-->
                  <!--                  #reasonInput-->
                  <!--                  (blur)="setReason(element, i, $event)"-->
                  <!--                  [disabled]="!selectionNotApprove.isSelected(element)"-->
                  <!--                  class="form-control"-->
                  <!--                ></textarea>-->
                </td>
              </ng-container>

              <ng-container matColumnDef="documentType">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ประเภทเอกสาร</th>
                <td *matCellDef="let element" mat-cell>{{ element.documentType }}</td>
              </ng-container>

              <ng-container matColumnDef="dateDoc">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>วันที่เอกสาร</th>
                <td *matCellDef="let element" mat-cell>{{ element.dateDoc | thaidate }}</td>
              </ng-container>

              <ng-container matColumnDef="dateAcct">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  วันที่ผ่านรายการ
                </th>
                <!--              <td mat-cell *matCellDef="let element"> {{element.dateAcct | date: 'dd.MM.yyyy'}} </td>-->
                <td *matCellDef="let element" mat-cell>{{ element.dateAcct | thaidate }}</td>
              </ng-container>

              <ng-container matColumnDef="amount">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>จำนวนเงิน</th>
                <td *matCellDef="let element" mat-cell>{{ element.amount | bigdecimal }}</td>
              </ng-container>

              <ng-container matColumnDef="invoiceDocumentNo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  ใบกำกับสินค้าอ้างอิง
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.invoiceDocumentNo }}
                </td>
              </ng-container>

              <ng-container matColumnDef="originalDocumentNo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>เลขที่เอกสาร</th>
                <td (click)="openDialogDetailDocument(element)" *matCellDef="let element" mat-cell>
                  {{ element.originalDocumentNo }}
                </td>
              </ng-container>

              <ng-container matColumnDef="originalFiscalYear">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ปีบัญชี</th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.originalFiscalYear | thaiyear }}
                </td>
              </ng-container>

              <ng-container matColumnDef="paymentMethod">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>วิธีชำระเงิน</th>
                <td *matCellDef="let element" mat-cell>{{ element.paymentMethod }}</td>
              </ng-container>

              <ng-container matColumnDef="headerReference">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>การอ้างอิง</th>
                <td (click)="searchRef(element)" *matCellDef="let element" mat-cell>
                  {{ element.headerReference }}
                </td>
              </ng-container>

              <ng-container matColumnDef="userPost">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ผู้ใช้</th>
                <td *matCellDef="let element" mat-cell>{{ element.userPost }}</td>
              </ng-container>

              <ng-container matColumnDef="fiArea">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>รหัสจังหวัด</th>
                <td *matCellDef="let element" mat-cell>{{ element.fiArea }}</td>
              </ng-container>

              <ng-container matColumnDef="costCenter">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ศูนย์ต้นทุน</th>
                <td *matCellDef="let element" mat-cell>{{ element.costCenter }}</td>
              </ng-container>
              <ng-container matColumnDef="fundSource">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>แหล่งของเงิน</th>
                <td *matCellDef="let element" mat-cell>{{ element.fundSource }}</td>
              </ng-container>
              <ng-container matColumnDef="bgCode">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>รหัสงบประมาณ</th>
                <td *matCellDef="let element" mat-cell>{{ element.bgCode }}</td>
              </ng-container>
              <ng-container matColumnDef="assignment">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>การกำหนด</th>
                <td *matCellDef="let element" mat-cell>{{ element.assignment }}</td>
              </ng-container>

              <ng-container matColumnDef="brLine">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>บรรทัดรายการ</th>
                <!--              <td *matCellDef="let element" mat-cell>{{ element.brLine }}</td>-->
                <td *matCellDef="let element" mat-cell>001</td>
              </ng-container>

              <ng-container matColumnDef="subAccount">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>บัญชีย่อย</th>
                <td *matCellDef="let element" mat-cell>{{ element.subAccount }}</td>
              </ng-container>

              <ng-container matColumnDef="subAccountOwner">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  เจ้าของบัญชีย่อย
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.subAccountOwner }}</td>
              </ng-container>

              <ng-container matColumnDef="depositAccount">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>บัญชีเงินฝาก</th>
                <td *matCellDef="let element" mat-cell>{{ element.depositAccount }}</td>
              </ng-container>

              <ng-container matColumnDef="depositAccountOwner">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  เจ้าของบัญชีเงินฝาก
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.depositAccountOwner }}</td>
              </ng-container>

              <ng-container matColumnDef="lineItemText">
                <th
                  *matHeaderCellDef
                  class="info"
                  mat-header-cell
                  mat-sort-header
                  style="min-width: 400px;"
                >
                  ข้อความ
                </th>
                <td style="width: 400px;" *matCellDef="let element" mat-cell>
                  <p style="word-break: break-word; white-space: normal;">
                    {{ element.lineItemText }}
                  </p>
                </td>
              </ng-container>

              <ng-container matColumnDef="specialGL">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  แยกประเภทพิเศษ
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.specialGL }}</td>
              </ng-container>

              <ng-container matColumnDef="dateBaseLine">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  วันที่เป็นฐานการจ่าย
                </th>
                <td *matCellDef="let element" class="text-nowrap" mat-cell>
                  {{ element.dateBaseLine | thaidate }}
                </td>
              </ng-container>

              <ng-container matColumnDef="reference2">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  คีย์อ้างอิง 2
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.reference2 }}</td>
              </ng-container>

              <ng-container matColumnDef="poDocumentNo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  เอกสารการจัดซื้อ
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.poDocumentNo }}</td>
              </ng-container>

              <ng-container matColumnDef="vendorName">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ชื่อ 1</th>
                <td *matCellDef="let element" mat-cell>{{ element.vendorName }}</td>
              </ng-container>

              <ng-container matColumnDef="vendorCode">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ผู้ขาย</th>
                <td *matCellDef="let element" mat-cell>{{ element.vendorCode }}</td>
              </ng-container>

              <ng-container matColumnDef="bankKey">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  คีย์ธนาคาร
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.bankKey }}</td>
              </ng-container>

              <ng-container matColumnDef="bankAccountNo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  เลขที่บัญชีธนาคาร
                </th>
                <td *matCellDef="let element" mat-cell>{{ element.bankAccountNo }}</td>
              </ng-container>

              <ng-container matColumnDef="bankAccountHolderName">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ผู้ถือบัญชี</th>
                <td *matCellDef="let element" mat-cell>{{ element.bankAccountHolderName }}</td>
              </ng-container>

              <ng-container matColumnDef="fundType">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>ประเภทกองทุน</th>
                <td *matCellDef="let element" mat-cell>{{ element.fundType }}</td>
              </ng-container>

              <ng-container matColumnDef="frStatus">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>FR Status</th>
                <td *matCellDef="let element" mat-cell>
                  <img
                    class="icon-status-om"
                    *ngIf="element.documentType === 'SA' || element.documentType === 'SB'"
                    src="assets/images/icon/iconFrAB.png"
                  />
                  <img
                    class="icon-status-om"
                    *ngIf="element.documentType === 'K2'"
                    src="assets/images/icon/iconFrK2.png"
                  />
                  <img
                    class="icon-status-om"
                    *ngIf="element.documentType === 'K7'"
                    src="assets/images/icon/iconFrK7.png"
                  />
                </td>
              </ng-container>

              <!-- สถานะ [iconStatus] -->
              <ng-container matColumnDef="iconStatus">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>สถานะ</th>
                <td *matCellDef="let element" mat-cell>
                  <img
                    *ngIf="element.iconStatus === '1'"
                    class="icon-status-om"
                    src="assets/images/icon/timeAlert.png"
                  />
                  <img
                    *ngIf="element.iconStatus === '2'"
                    class="icon-status-om"
                    src="assets/images/icon/timeDelay.png"
                  />
                  <img
                    *ngIf="element.iconStatus === '3'"
                    class="icon-status-om"
                    src="assets/images/icon/time.png"
                  />
                </td>
              </ng-container>

              <!-- สถานะ [textStatus] -->
              <ng-container matColumnDef="textStatus">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>สถานะ</th>
                <td *matCellDef="let element" mat-cell>{{ renderStatusDescription(element) }}</td>
              </ng-container>

              <ng-container matColumnDef="errWtInfo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  Err WtInfo
                </th>

                <td *matCellDef="let element" mat-cell>
                  {{ element.errWtInfo }}
                </td>
              </ng-container>

              <ng-container matColumnDef="deduct">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  หัก
                </th>

                <td *matCellDef="let element" mat-cell>
                  <img
                    *ngIf="element.countChild && element.countChild >= 2"
                    class="icon-status-om"
                    src="assets/images/icon/accept.png"
                  />
                  <img
                    *ngIf="element.countChild && element.countChild !== 0 && element.countChild < 2"
                    class="icon-status-om"
                    src="assets/images/icon/unaccept.png"
                  />
                </td>
              </ng-container>
              <ng-container matColumnDef="partnerBankType">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  ประเภทธนาคารคู่ค้า
                </th>

                <td *matCellDef="let element" mat-cell>
                  {{ element.partnerBankType }}
                </td>
              </ng-container>

              <ng-container matColumnDef="wareHouseNo">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  เลขที่คลังรับ
                </th>
                <td *matCellDef="let element" mat-cell>
                  {{ element.wareHouseNo }}
                </td>
              </ng-container>

              <ng-container matColumnDef="depositMoney">
                <th *matHeaderCellDef class="info" mat-header-cell mat-sort-header>
                  ปรับเงินฝาก
                </th>

                <td *matCellDef="let element" mat-cell>
                  {{ element.depositMoney }}
                </td>
              </ng-container>

              <tr *matHeaderRowDef="getDisplayedColumns(); sticky: true" mat-header-row></tr>
              <tr
                (click)="row.highlighted = !row.highlighted"
                (mouseout)="row.hovered = false"
                (mouseover)="row.hovered = true"
                *matRowDef="let row; columns: getDisplayedColumns()"
                [ngClass]="{ hovered: row.hovered, highlighted: row.highlighted }"
                mat-row
              ></tr>
            </table>
          </div>
        </div>
        <mat-paginator
          [hidden]="isShowSearchData"
          [pageSizeOptions]="[5, 10, 20, 50, 100]"
          showFirstLastButtons
        >
        </mat-paginator>
      </mat-card-content>
      <div [hidden]="isShowSearchData" class="row mx-auto mt-3 border-t-black">
        <div class="mx-auto d-flex">
          <button (click)="selectAllApproved()" class="btn-light" type="button">
            อนุมัติทุกรายการ
          </button>
          <button (click)="unselectAllApproved()" class="btn-light" type="button">
            ยกเลิกอนุมัติทุกรายการ
          </button>
          <button (click)="selectAllNotApproved()" class="btn-light" type="button">
            ยกเลิกไม่อนุมัติทุกรายการ
          </button>
          <!--          <button (click)="unselectAllUnApproved()" class="btn-light" type="button">-->
          <!--            ไม่อนุมัติทุกรายการ-->
          <!--          </button>-->
        </div>
      </div>
      <div [hidden]="isShowSearchData" class="row mx-auto mt-3 border-t-black">
        <div class="mx-auto d-flex">
          <button (click)="onPreSave()" class="btn-light" type="button">ยืนยัน</button>
        </div>
      </div>
      <ul class="warning-box">
        <li *ngFor="let c of listValidate">{{ c }}</li>
      </ul>
      <div [hidden]="isShowSearchData" class="row mx-auto mt-3 border-t-black">
        <div class="mx-auto d-flex">
          <button (click)="openDialogOmSearchColumn()" class="btn-light" type="button">
            เลือกโครงร่าง
          </button>
          <button (click)="openDialogOmColumnTable()" class="btn-light" type="button">
            จัดการโครงร่าง
          </button>
          <button (click)="openDialogOmSaveColumnTable('save')" class="btn-light" type="button">
            สร้างโครงร่าง
          </button>
          <button
            *ngIf="dataColumn"
            (click)="openDialogOmSaveColumnTable('edit')"
            class="btn-light"
            type="button"
          >
            แก้ไขโครงร่าง
          </button>
        </div>
      </div>
    </mat-card>
  </div>
</div>
